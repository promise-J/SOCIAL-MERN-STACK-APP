(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,t,n){},118:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),a=n(44),r=n.n(a),i=n(3),o=n.n(i),l=n(6),j=n(4),d=n.n(j),u=n(10),b=n(8),m=n(9),O=(n(117),n(5)),h=(n(118),n(177)),p=n(178),x=n(179),v=n(180),f=n(181),g={LOGIN:"LOGIN",GET_TOKEN:"GET_TOKEN",GET_USER:"GET_USER",LOGOUT:"LOGOUT",GET_POSTS_SUCCESS:"GET_POSTS_SUCCESS",GET_POSTS_FAILURE:"GET_POSTS_FAILURE",GET_POSTS_REQUEST:"GET_POSTS_REQUEST"},N=function(){return{type:g.LOGIN}},w=function(){return{type:g.LOGOUT}},I=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/users/single",{headers:{Authorization:t}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){return{type:g.GET_USER,payload:{user:e.data,isAdmin:e.data.isAdmin}}},S=n(0);var k=function(e){var t,n,c,a,r=e.cb,i=Object(m.g)(),j=Object(u.b)(),g=Object(s.useState)(!1),N=Object(O.a)(g,2),I=N[0],y=N[1],k=Object(s.useState)([]),_=Object(O.a)(k,2),E=_[0],C=_[1],P=Object(u.c)((function(e){return e.auth})),T=P.user;Object(s.useEffect)((function(){y(P.isLogged)}),[P.isLogged]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/conversation/"+(null===T||void 0===T?void 0:T._id));case 2:t=e.sent,C(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[T._id,r]);var L=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/auth/logout");case 3:localStorage.removeItem("firstLogin"),j(w()),i.push("/login"),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),localStorage.removeItem("firstLogin"),j(w()),i.push("/login");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"topbar",children:Object(S.jsxs)("div",{className:"topbarWrapper",children:[Object(S.jsx)("div",{className:"topbar-left",children:Object(S.jsx)(b.b,{to:"/home",style:{textDecoration:"none",color:"inherit"},children:"G-STAR"})}),Object(S.jsx)("div",{className:"topbar-center",children:Object(S.jsxs)("div",{className:"topbarSearch",children:[Object(S.jsx)(h.a,{className:"topbarSearchIcon"}),Object(S.jsx)("input",{placeholder:"Search for friends, post or Video",className:"topbarSearchInput"})]})}),Object(S.jsxs)("div",{className:"topbar-right",children:[Object(S.jsxs)("div",{className:"topbarRightLinks",children:[Object(S.jsx)("div",{className:"topbarRightLink",children:I?Object(S.jsx)(b.b,{to:"#",style:{textDecoration:"none",color:"inherit"},onClick:L,children:Object(S.jsx)("h5",{children:"Logout"})}):Object(S.jsx)(b.b,{to:"/login",style:{textDecoration:"none",color:"inherit"},children:Object(S.jsx)("h5",{children:"Login"})})}),Object(S.jsx)("div",{className:"topbarRightLink",children:Object(S.jsx)("h5",{children:"Timeline"})})]}),Object(S.jsxs)("div",{className:"topbarRightIcons",children:[Object(S.jsxs)("div",{className:"topbarRightIcon",children:[Object(S.jsx)(p.a,{}),!1]}),Object(S.jsx)(b.b,{style:{textDecoration:"none",color:"inherit"},to:"/messenger",children:Object(S.jsxs)("div",{className:"topbarRightIcon",children:[Object(S.jsx)(x.a,{}),Object(S.jsx)("span",{className:"topbarRightLabel",children:E.length})]})}),Object(S.jsx)(b.b,{to:"/allUsers",style:{textDecoration:"none",color:"inherit"},children:Object(S.jsxs)("div",{className:"topbarRightIcon",children:[Object(S.jsx)(v.a,{}),Object(S.jsx)("span",{className:"topbarRightLabel",children:"+"})]})}),0!==(null===T||void 0===T||null===(t=T.notification)||void 0===t?void 0:t.length)&&Object(S.jsx)(b.b,{style:{textDecoration:"none",color:"inherit"},to:"/notifications",children:Object(S.jsxs)("div",{className:"topbarRightIcon",children:[Object(S.jsx)(f.a,{}),(null===T||void 0===T||null===(n=T.notification)||void 0===n?void 0:n.length)>0&&Object(S.jsx)("span",{className:"topbarRightLabel",children:null===T||void 0===T||null===(c=T.notifications)||void 0===c?void 0:c.length})]})})]})]}),I?Object(S.jsx)(b.b,{to:"/profile/".concat(T.username),children:Object(S.jsx)("img",{src:null===T||void 0===T||null===(a=T.profilePic)||void 0===a?void 0:a.url,alt:"here",className:"topbarRightImg"})}):null]})})},_=(n(123),n(182)),E=n(183),C=n(184),P=n(185),T=n(186),L=n(187),F=n(188),D=n(189);var B=function(){return Object(S.jsx)("div",{className:"sidebar",children:Object(S.jsxs)("div",{className:"sidebarWrapper",children:[Object(S.jsxs)("ul",{className:"sidebarItemLists",children:[Object(S.jsxs)("li",{className:"sidebarItemList",children:[Object(S.jsx)("span",{className:"sidebarItemIcon",children:Object(S.jsx)(_.a,{})}),Object(S.jsx)("span",{className:"sidebarItemName",children:"Feed"})]}),Object(S.jsxs)("li",{className:"sidebarItemList",children:[Object(S.jsx)("span",{className:"sidebarItemIcon",children:Object(S.jsx)(x.a,{})}),Object(S.jsx)("span",{className:"sidebarItemName",children:"Chat"})]}),Object(S.jsxs)("li",{className:"sidebarItemList",children:[Object(S.jsx)("span",{className:"sidebarItemIcon",children:Object(S.jsx)(E.a,{})}),Object(S.jsx)("span",{className:"sidebarItemName",children:"Video"})]}),Object(S.jsxs)("li",{className:"sidebarItemList",children:[Object(S.jsx)("span",{className:"sidebarItemIcon",children:Object(S.jsx)(C.a,{})}),Object(S.jsx)("span",{className:"sidebarItemName",children:"Group"})]}),Object(S.jsxs)("li",{className:"sidebarItemList",children:[Object(S.jsx)("span",{className:"sidebarItemIcon",children:Object(S.jsx)(P.a,{})}),Object(S.jsx)("span",{className:"sidebarItemName",children:"Bookmarks"})]}),Object(S.jsxs)("li",{className:"sidebarItemList",children:[Object(S.jsx)("span",{className:"sidebarItemIcon",children:Object(S.jsx)(T.a,{})}),Object(S.jsx)("span",{className:"sidebarItemName",children:"Questions"})]}),Object(S.jsxs)("li",{className:"sidebarItemList",children:[Object(S.jsx)("span",{className:"sidebarItemIcon",children:Object(S.jsx)(L.a,{})}),Object(S.jsx)("span",{className:"sidebarItemName",children:"Jobs"})]}),Object(S.jsxs)("li",{className:"sidebarItemList",children:[Object(S.jsx)("span",{className:"sidebarItemIcon",children:Object(S.jsx)(F.a,{})}),Object(S.jsx)("span",{className:"sidebarItemName",children:"Events"})]}),Object(S.jsxs)("li",{className:"sidebarItemList",children:[Object(S.jsx)("span",{className:"sidebarItemIcon",children:Object(S.jsx)(D.a,{})}),Object(S.jsx)("span",{className:"sidebarItemName",children:"Courses"})]}),Object(S.jsx)("li",{className:"sidebarItemList",children:Object(S.jsx)("span",{className:"sidebarItemName",children:Object(S.jsx)("button",{className:"sidebarMore",children:"Show More"})})})]}),Object(S.jsx)("hr",{className:"sidebarHr"}),Object(S.jsxs)("ul",{className:"sidebarFriends",children:[Object(S.jsxs)("li",{className:"sidebarFriend",children:[Object(S.jsx)("img",{src:"/images/promise.jpg",alt:"",className:"sidebarFriendImg"}),Object(S.jsx)("span",{className:"sidebarFriendName",children:"Promise"})]}),Object(S.jsxs)("li",{className:"sidebarFriend",children:[Object(S.jsx)("img",{src:"/images/promise.jpg",alt:"",className:"sidebarFriendImg"}),Object(S.jsx)("span",{className:"sidebarFriendName",children:"Promise"})]}),Object(S.jsxs)("li",{className:"sidebarFriend",children:[Object(S.jsx)("img",{src:"/images/promise.jpg",alt:"",className:"sidebarFriendImg"}),Object(S.jsx)("span",{className:"sidebarFriendName",children:"Promise"})]}),Object(S.jsxs)("li",{className:"sidebarFriend",children:[Object(S.jsx)("img",{src:"/images/promise.jpg",alt:"",className:"sidebarFriendImg"}),Object(S.jsx)("span",{className:"sidebarFriendName",children:"Promise"})]}),Object(S.jsxs)("li",{className:"sidebarFriend",children:[Object(S.jsx)("img",{src:"/images/promise.jpg",alt:"",className:"sidebarFriendImg"}),Object(S.jsx)("span",{className:"sidebarFriendName",children:"Promise"})]}),Object(S.jsxs)("li",{className:"sidebarFriend",children:[Object(S.jsx)("img",{src:"/images/promise.jpg",alt:"",className:"sidebarFriendImg"}),Object(S.jsx)("span",{className:"sidebarFriendName",children:"Promise"})]}),Object(S.jsxs)("li",{className:"sidebarFriend",children:[Object(S.jsx)("img",{src:"/images/promise.jpg",alt:"",className:"sidebarFriendImg"}),Object(S.jsx)("span",{className:"sidebarFriendName",children:"Promise"})]})]})]})})},R=n(27),U=(n(124),n(191)),A=n(192),G=n(193),M=n(194),z=n(190);var W=function(e){var t,n=e.cb,c=e.setCb,a=Object(u.c)((function(e){return e.token})).token,r=Object(u.c)((function(e){return e.auth})).user,i=Object(s.useState)(null),j=Object(O.a)(i,2),m=j[0],h=j[1],p=Object(s.useState)(!1),x=Object(O.a)(p,2),v=x[0],f=x[1],g=Object(s.useRef)(),N=function(){var e=Object(l.a)(o.a.mark((function e(t){var s,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(!0),t.preventDefault(),s={content:g.current.value},!m){e.next=16;break}return(r=new FormData).append("file",m),e.prev=6,e.next=9,d.a.post("/api/upload",r,{headers:{Authorization:a}});case 9:i=e.sent,s.image=i.data,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0);case 16:return e.prev=16,e.next=19,d.a.post("/posts",s,{headers:{Authorization:a}});case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(16),console.log(e.t1);case 24:h(null),c(!n),f(!1);case 27:case"end":return e.stop()}}),e,null,[[6,13],[16,21]])})));return function(t){return e.apply(this,arguments)}}();return v?Object(S.jsx)(z.a,{}):Object(S.jsxs)("div",{className:"mainShare",children:[Object(S.jsxs)("div",{className:"mainShareTop",children:[Object(S.jsx)(b.b,{to:"/profile/".concat(null===r||void 0===r?void 0:r.username),children:Object(S.jsx)("img",{src:null===r||void 0===r||null===(t=r.profilePic)||void 0===t?void 0:t.url,alt:"",className:"mainShareProfileImg"})}),Object(S.jsx)("input",{placeholder:"What is on your mind ".concat(null===r||void 0===r?void 0:r.username,"?"),ref:g,className:"mainShareInput"})]}),Object(S.jsx)("hr",{className:"mainShareHr"}),m&&Object(S.jsxs)("div",{className:"uploadImage",children:[Object(S.jsx)("span",{onClick:function(e){return h(null)},className:"cancelImgUpload",children:"x"}),Object(S.jsx)("img",{src:URL.createObjectURL(m),alt:"",className:"uploadImg"})]}),Object(S.jsxs)("form",{onSubmit:N,className:"mainShareBottom",children:[Object(S.jsxs)("div",{className:"mainShareBottomIcons",children:[Object(S.jsxs)("div",{className:"mainShareBottomIcon",children:[Object(S.jsxs)("label",{htmlFor:"file",style:{display:"flex",justifyContent:"center",alignContent:"center"},children:[Object(S.jsx)(U.a,{htmlColor:"crimson",htmlFor:"file",style:{cursor:"pointer"}}),Object(S.jsx)("span",{style:{cursor:"pointer"},className:"mainShareBottomText",children:"Photo or Video"})]}),Object(S.jsx)("input",{onChange:function(e){h(e.target.files[0])},accept:".png, .jpeg, .jpg",type:"file",id:"file",style:{display:"none"}})]}),Object(S.jsxs)("div",{className:"mainShareBottomIcon",children:[Object(S.jsx)(A.a,{htmlColor:"blue"}),Object(S.jsx)("span",{className:"mainShareBottomText",children:"Tag"})]}),Object(S.jsxs)("div",{className:"mainShareBottomIcon",children:[Object(S.jsx)(G.a,{htmlColor:"green"}),Object(S.jsx)("span",{className:"mainShareBottomText",children:"Location"})]}),Object(S.jsxs)("div",{className:"mainShareBottomIcon",children:[Object(S.jsx)(M.a,{htmlColor:"rgb(172, 147, 5)"}),Object(S.jsx)("span",{className:"mainShareBottomText",children:"Feelings"})]})]}),Object(S.jsx)("button",{type:"submit",className:"mainShareButton",children:"Share"})]})]})},V=n(195),H=n(196),J=n(197),K=n(33);var X=function(e){var t,n,c=e.post,a=e.cb,r=e.setCb,i=Object(s.useState)(c.like.length),j=Object(O.a)(i,2),u=j[0],m=j[1],h=Object(s.useState)(null),p=Object(O.a)(h,2),x=p[0],v=p[1],f=Object(s.useState)(!1),g=Object(O.a)(f,2),N=g[0],w=g[1],I=Object(s.useState)(!1),y=Object(O.a)(I,2),k=y[0],_=y[1];Object(s.useEffect)((function(){w(c.like.includes(null===x||void 0===x?void 0:x._id))}),[c,null===x||void 0===x?void 0:x._id]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/users/?userId=".concat(c.userId));case 2:t=e.sent,v(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c.userId]);var E=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.public_id){e.next=6;break}return e.next=4,d.a.post("/api/destroy",{public_id:t.image.public_id});case 4:n=e.sent,console.log(n.data);case 6:return e.next=8,d.a.delete("/posts/".concat(t._id,"?userId=").concat(x._id));case 8:s=e.sent,console.log(s.data),r(!a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0,x._id);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.put("/posts/".concat(c._id,"/like"),{userId:x._id});case 3:m(N?u-1:u+1),w(!N),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{onClick:function(){return k&&_(!1)},className:"mainPost",children:[Object(S.jsxs)("div",{className:"mainPostTop",children:[Object(S.jsxs)("div",{style:{opacity:k?"1":"0"},className:"extra-dot",children:[Object(S.jsx)(b.b,{style:{color:"inherit",textDecoration:"none",width:"100%"},to:"/post/".concat(c._id),children:Object(S.jsx)("p",{children:"Edit"})}),Object(S.jsx)("p",{onClick:function(){return E(c)},children:"Delete"})]}),Object(S.jsxs)("div",{className:"mainPostDetails",children:[Object(S.jsx)(b.b,{to:"/profile/".concat(null===x||void 0===x?void 0:x.username),children:Object(S.jsx)("img",{src:null===x||void 0===x||null===(t=x.profilePic)||void 0===t?void 0:t.url,alt:"",className:"mainPostImg"})}),Object(S.jsx)("span",{className:"mainPostUsername",children:null===x||void 0===x?void 0:x.username}),Object(S.jsx)("span",{className:"mainPostTime",children:Object(K.a)(new Date(c.createdAt))})]}),Object(S.jsx)(V.a,{onClick:function(){_(!k)}})]}),Object(S.jsxs)("div",{className:"mainPostBody",children:[Object(S.jsx)("p",{className:"mainPostDescription",children:c.content}),c.image&&Object(S.jsx)("img",{src:null===(n=c.image)||void 0===n?void 0:n.url,alt:"",className:"mainPostTitleImg"})]}),Object(S.jsxs)("div",{className:"mainPostBottom",children:[Object(S.jsxs)("div",{className:"mainPostBottomLike",children:[Object(S.jsx)(H.a,{onClick:C,className:"mainPostBottomLikeIcon"}),Object(S.jsx)(J.a,{onClick:C,className:"mainPostBottomHeartIcon"}),Object(S.jsxs)("span",{className:"mainPostLikeCon",children:[u<1?"No likes":u," ",u<1?"":1===u?"person":"people liked it"]})]}),Object(S.jsx)("div",{className:"mainPostBottomComment",children:Object(S.jsx)(b.b,{style:{color:"inherit",textDecoration:"none"},to:"/post/".concat(c._id),children:"View Comments"})})]})]})};var Q=function(e){var t,n,c,a=e.username,r=e.SinglePostId,i=Object(m.g)(),j=Object(u.c)((function(e){return e.auth})),h=Object(s.useState)([]),p=Object(O.a)(h,2),x=p[0],v=p[1],f=Object(s.useState)(!1),g=Object(O.a)(f,2),N=g[0],w=g[1],I=j.user,y=Object(s.useState)({}),k=Object(O.a)(y,2),_=k[0],E=k[1],C=Object(s.useState)(""),P=Object(O.a)(C,2),T=P[0],L=P[1],F=Object(s.useState)(""),D=Object(O.a)(F,2),B=D[0],U=D[1],A=Object(s.useState)(""),G=Object(O.a)(A,2),M=G[0],z=G[1],H=Object(s.useState)([]),J=Object(O.a)(H,2),Q=J[0],Y=J[1],q=Object(s.useState)(!1),Z=Object(O.a)(q,2),$=(Z[0],Z[1]),ee=Object(s.useState)(!1),te=Object(O.a)(ee,2),ne=te[0],se=te[1],ce=Object(s.useRef)();Object(s.useEffect)((function(){var e;null===(e=ce.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[Q]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/posts/".concat(r));case 2:t=e.sent,E(t.data),U(t.data.content);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]),Object(s.useEffect)((function(){var e=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($(!0),!a){e.next=7;break}return e.next=4,d.a.get("/posts/profile/"+a);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,d.a.get("posts/timeline/"+(null===I||void 0===I?void 0:I._id));case 9:e.t0=e.sent;case 10:n=e.t0,console.log(n,a),v(n.data&&(null===(t=n.data)||void 0===t?void 0:t.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();$(!1),e()}),[a,I._id,N]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/comment/all/".concat(_._id));case 2:t=e.sent,Y(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[_._id,ne]),Object(s.useEffect)((function(){_&&function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/users/?userId=".concat(_.userId));case 2:t=e.sent,L(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[_.userId,_]);var ae=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.put("/posts/update/".concat(_._id),{userId:I._id,content:B});case 3:i.push("/home"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,M){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,d.a.post("/api/comment",{user:I,postId:_._id,text:M});case 5:z(""),se(!ne),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return r?Object(S.jsx)("div",{style:{height:"100%"},className:"main",children:Object(S.jsxs)("div",{className:"mainWrapper",children:[Object(S.jsxs)("div",{className:"mainPost",style:{width:r&&"63%"},children:[Object(S.jsxs)("div",{className:"mainPostTop",children:[Object(S.jsxs)("div",{className:"mainPostDetails",children:[Object(S.jsx)(b.b,{to:"/profile/".concat(null===T||void 0===T?void 0:T.username),children:Object(S.jsx)("img",{src:null===T||void 0===T||null===(t=T.profilePic)||void 0===t?void 0:t.url,alt:"i",className:"mainPostImg"})}),Object(S.jsx)("span",{className:"mainPostUsername",children:null===T||void 0===T?void 0:T.username}),Object(S.jsx)("span",{className:"mainPostTime",children:Object(K.a)(new Date(_.createdAt))})]}),Object(S.jsx)(V.a,{})]}),Object(S.jsxs)("div",{className:"mainPostBody",children:[Object(S.jsx)("p",{className:"mainPostDescription",children:Object(S.jsx)("input",(n={name:"desc",style:{padding:10},value:B,onChange:function(e){return U(e.target.value)}},Object(R.a)(n,"style",{width:"100%",height:"30px",outline:"none",border:"1px solid gray"}),Object(R.a)(n,"placeholder","Text here"),n))}),_.image&&Object(S.jsx)("img",{src:null===(c=_.image)||void 0===c?void 0:c.url,alt:"i",style:{width:r&&"100%",height:r&&"150px",objectFit:"cover"},className:"mainPostTitleImg"})]}),Object(S.jsx)("div",{className:"mainPostBottom",children:Object(S.jsxs)("div",{className:"mainPostBottomComment",style:{width:"100%",height:"20px"},children:[Object(S.jsxs)("span",{children:[Q&&Q.length," comments"]}),Object(S.jsx)("button",{onClick:ae,style:{position:"absolute",top:"0",right:"0",padding:"5px 12px",background:"teal",color:"white",outline:"none",border:"none"},children:"Save"})]})})]}),Object(S.jsxs)("div",{className:"comments",children:[Object(S.jsxs)("div",{className:"comments-input-div",children:[Object(S.jsx)("input",{className:"comment-input",name:"comment",value:M,onChange:function(e){return z(e.target.value)},placeholder:"Comment here"}),M&&Object(S.jsx)("button",{onClick:re,children:"Comment"})]}),Q&&Q.map((function(e){var t,n;return Object(S.jsxs)("div",{ref:ce,className:"comment",children:[Object(S.jsx)("img",{src:null===e||void 0===e||null===(t=e.user)||void 0===t||null===(n=t.profilePic)||void 0===n?void 0:n.url,alt:"none"}),Object(S.jsx)("span",{children:e.text})]},e._id)}))]})]})}):Object(S.jsx)("div",{className:"main",children:Object(S.jsxs)("div",{className:"mainWrapper",children:[!a&&Object(S.jsx)(W,{cb:N,setCb:w}),0===(null===x||void 0===x?void 0:x.length)?Object(S.jsx)("h2",{style:{fontSize:67,color:"gray"},children:"No Post yet "}):null===x||void 0===x?void 0:x.map((function(e){return Object(S.jsx)(X,{user:I,setCb:w,cb:N,post:e},e._id)}))]})})},Y=n(198),q=n(199);n(125);var Z=function(e){var t,n=e.user,c=Object(s.useState)([]),a=Object(O.a)(c,2),r=a[0],i=a[1],j=Object(u.c)((function(e){return e.auth})),m=(Object(u.c)((function(e){return e.token})).token,j.user),h=Object(s.useState)(null===m||void 0===m||null===(t=m.followings)||void 0===t?void 0:t.includes(null===n||void 0===n?void 0:n._id)),p=Object(O.a)(h,2),x=p[0],v=p[1];Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/users/friends/"+n._id);case 3:t=e.sent,i(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[n]);var f=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.put("/users/".concat(n._id,"/follow"),{userId:null===m||void 0===m?void 0:m._id});case 3:v(!x),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"rightbar",children:Object(S.jsxs)("div",{className:"rightbarWrapper",children:[n&&(null===n||void 0===n?void 0:n.username)!==(null===m||void 0===m?void 0:m.username)&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("button",{className:"rightbarFollowButton",onClick:f,children:[x?"Follow":"Unfollow",x?Object(S.jsx)(q.a,{}):Object(S.jsx)(Y.a,{})]}),Object(S.jsx)("button",{className:"rightbarMessageButton",children:"Add Friend"})]}),n&&Object(S.jsxs)("div",{className:"userDetails",children:[Object(S.jsxs)("div",{className:"userDetail",children:[Object(S.jsx)("span",{children:"Relationship"}),Object(S.jsx)("span",{children:Object(S.jsxs)("b",{children:[n.relationship?null===n||void 0===n?void 0:n.relationship:"N/A","."]})})]}),Object(S.jsxs)("div",{className:"userDetail",children:[Object(S.jsx)("span",{children:"City: "}),Object(S.jsx)("span",{children:Object(S.jsxs)("b",{children:[n.city?null===n||void 0===n?void 0:n.city:"N/A","."]})})]}),Object(S.jsxs)("div",{className:"userDetail",children:[Object(S.jsx)("span",{children:"Home town: "}),Object(S.jsx)("span",{children:Object(S.jsxs)("b",{children:[n.hometown?null===n||void 0===n?void 0:n.hometown:"N/A","."]})})]}),Object(S.jsxs)("div",{className:"userDetail",children:[Object(S.jsx)("span",{children:"Sex: "}),Object(S.jsx)("span",{children:Object(S.jsxs)("b",{children:[n.sex?null===n||void 0===n?void 0:n.sex:"N/A","."]})})]})]}),Object(S.jsx)("div",{className:"rightbarTop",children:Object(S.jsxs)("div",{className:"rightbarBirthday",children:[Object(S.jsx)("img",{src:"/images/w1.jpeg",className:"rightbarBirthdayImg",alt:""}),Object(S.jsx)("div",{className:"rightbarBirthdayDiv",children:Object(S.jsxs)("span",{className:"rightbarBirthdayText",children:[Object(S.jsx)("b",{children:"Favour Johnson"})," and ",Object(S.jsx)("b",{children:"3 others friends"})," have birthday today."]})})]})}),Object(S.jsx)("div",{className:"rightbarImageContainer",children:Object(S.jsx)("img",{src:"/images/w4.jpeg",alt:"",className:"rightbarImage"})}),Object(S.jsxs)("div",{className:"rightbarOnlineFriends",children:[Object(S.jsx)("h3",{className:"rightbarOnlineHead",children:0===r.length?"":"Online Friends"}),0===r.length?Object(S.jsx)("h2",{children:"Connect to friends Now!"}):r.map((function(e){var t;return Object(S.jsx)("ul",{className:"rightbarOnlineFriendLists",children:Object(S.jsx)(b.b,{style:{color:"inherit",textDecoration:"none"},to:"/profile/".concat(null===e||void 0===e?void 0:e.username),children:Object(S.jsxs)("li",{className:"rightbarOnlineFriendList",children:[Object(S.jsx)("div",{className:"rightbarOnlineStatus"}),Object(S.jsx)("img",{src:null===e||void 0===e||null===(t=e.profilePic)||void 0===t?void 0:t.url,alt:"",className:"rightbarOnlineFriendImg"}),Object(S.jsx)("span",{className:"rightbarOnlineFriendName",children:null===e||void 0===e?void 0:e.username})]})})})}))]})]})})};n(68);var $=function(){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(k,{}),Object(S.jsxs)("div",{className:"home",children:[Object(S.jsx)(B,{}),Object(S.jsx)(Q,{}),Object(S.jsx)(Z,{})]})]})},ee=n(7),te=(n(126),{email:"",password:"",error:""});var ne=function(){var e=Object(u.b)(),t=Object(m.g)(),n=Object(s.useState)(!1),c=Object(O.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)(te),j=Object(O.a)(i,2),h=j[0],p=j[1],x=h.email,v=h.password,f=h.error,g=function(){var n=Object(l.a)(o.a.mark((function n(s){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s.preventDefault(),r(!0),n.prev=2,n.next=5,d.a.post("/auth/login",{email:x,password:v});case 5:n.sent,localStorage.setItem("firstLogin",!0),e(N()),t.push("/home"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),(null===n.t0||void 0===n.t0?void 0:n.t0.response)&&p(Object(ee.a)(Object(ee.a)({},h),{},{error:n.t0.response.data.msg}));case 14:r(!1);case 15:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(e){return n.apply(this,arguments)}}(),w=function(e){var t=e.target,n=t.value,s=t.name;p(Object(ee.a)(Object(ee.a)({},h),{},Object(R.a)({},s,n)))};return Object(S.jsxs)("div",{className:"login",children:[Object(S.jsxs)("div",{className:"loginLeft",children:[Object(S.jsx)("h2",{children:"G-STAR"}),Object(S.jsx)("img",{src:"https://cdn.dribbble.com/users/24078/screenshots/15522433/media/e92e58ec9d338a234945ae3d3ffd5be3.jpg?compress=1&resize=400x300",alt:"",className:"loginImg"})]}),Object(S.jsx)("div",{className:"loginRight",children:Object(S.jsxs)("form",{onSubmit:g,className:"loginForm",children:[Object(S.jsx)("h4",{className:"loginHead",children:"Login Now"}),f&&Object(S.jsx)("span",{style:{color:"red",fontSize:"17px"},children:f}),Object(S.jsx)("input",{onChange:w,name:"email",value:x,type:"email",className:"loginInput",placeholder:"Email here"}),Object(S.jsx)("input",{onChange:w,name:"password",value:v,type:"password",className:"loginInput",placeholder:"Password here"}),Object(S.jsx)("button",{className:"loginButton",type:"submit",children:a?Object(S.jsx)(z.a,{style:{color:"white"}}):"Login"}),Object(S.jsx)("p",{className:"loginAccountCheck",children:"Don't have an account yet?"}),Object(S.jsx)(b.b,{className:"loginRegisterButton",to:"/register",type:"submit",children:"Register"})]})})]})},se=n(56),ce=(n(127),n(128),n(200));var ae=function(e){var t,n=e.currentUser,c=e.cb,a=e.conversation,r=e.setCb,i=Object(s.useState)(),j=Object(O.a)(i,2),u=j[0],b=j[1];Object(s.useEffect)((function(){var e=a.members.find((function(e){return e!==(null===n||void 0===n?void 0:n._id)}));(function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/users/?userId=".concat(e));case 2:n=t.sent,b(n.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[a.members,null===n||void 0===n?void 0:n._id]);var m=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.delete("api/conversation/".concat(a._id));case 2:t=e.sent,r(!c),console.log(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"chatMenuFriend",children:[Object(S.jsx)("img",{src:u&&(null===u||void 0===u||null===(t=u.profilePic)||void 0===t?void 0:t.url),alt:".",className:"chatMenuFriendImg"}),Object(S.jsx)("span",{className:"chatMenuFriendName",children:u&&(null===u||void 0===u?void 0:u.username)}),Object(S.jsxs)("span",{onClick:m,className:"chatMenuDeleteIcon",children:[Object(S.jsx)(ce.a,{style:{fontSize:"20px"}})," "]})]})};n(129);var re=function(e){var t=e.own,n=e.message,s=e.otherUser;return Object(S.jsxs)("div",{className:t?"message own":"message",children:[Object(S.jsxs)("div",{className:"messageTop",children:[Object(S.jsx)("img",{className:"messageImg",src:null===s||void 0===s?void 0:s.profilePic.url,alt:""}),Object(S.jsx)("p",{className:"messageText",children:n.text})]}),Object(S.jsx)("div",{className:"messageBottom",children:Object(K.a)(n.createdAt)})]})};n(130);function ie(e){var t=e.onlineUsers,n=e.currentId,c=e.setCurrentChat,a=Object(s.useState)([]),r=Object(O.a)(a,2),i=r[0],j=r[1],u=Object(s.useState)([]),b=Object(O.a)(u,2),m=b[0],h=b[1];Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/users/friends/"+n);case 2:t=e.sent,j(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(s.useEffect)((function(){h(i.filter((function(e){return t.includes(e._id)})))}),[i,t]);var p=function(){var e=Object(l.a)(o.a.mark((function e(t){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/conversations/find/".concat(n,"/").concat(t._id));case 3:s=e.sent,c(s.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"chatOnline",children:m.map((function(e){var t;return Object(S.jsxs)("div",{className:"chatOnlineFriend",onClick:function(){return p(e)},children:[Object(S.jsxs)("div",{className:"chatOnlineImgContainer",children:[Object(S.jsx)("img",{className:"chatOnlineImg",src:null===e||void 0===e||null===(t=e.profilePic)||void 0===t?void 0:t.url,alt:""}),Object(S.jsx)("div",{className:"chatOnlineBadge"})]}),Object(S.jsx)("span",{className:"chatOnlineName",children:null===e||void 0===e?void 0:e.username})]})}))})}var oe=n(87);function le(){var e,t=Object(s.useState)([]),n=Object(O.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)(null),i=Object(O.a)(r,2),j=i[0],b=i[1],m=Object(s.useState)([]),h=Object(O.a)(m,2),p=h[0],x=h[1],v=Object(s.useState)(""),f=Object(O.a)(v,2),g=f[0],N=f[1],w=Object(s.useState)(null),I=Object(O.a)(w,2),y=I[0],_=I[1],E=Object(s.useState)([]),C=Object(O.a)(E,2),P=C[0],T=C[1],L=Object(s.useState)(null),F=Object(O.a)(L,2),D=F[0],B=F[1],R=Object(s.useState)(!1),U=Object(O.a)(R,2),A=U[0],G=U[1],M=Object(s.useRef)(),z=Object(u.c)((function(e){return e.auth})).user,W=Object(s.useRef)(),V=Object(s.useState)(!1),H=Object(O.a)(V,2),J=H[0],K=H[1];Object(s.useEffect)((function(){M.current=Object(oe.io)(),M.current.on("getMessage",(function(e){_({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(s.useEffect)((function(){y&&(null===j||void 0===j?void 0:j.members.includes(y.sender))&&x((function(e){return[].concat(Object(se.a)(e),[y])}))}),[y,j]),Object(s.useEffect)((function(){M.current.emit("addUser",z._id),M.current.on("getUsers",(function(e){var t;T(null===(t=z.followings)||void 0===t?void 0:t.filter((function(t){return e.some((function(e){return e.userId===t}))})))}))}),[z]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,K(!0),e.next=4,d.a.get("/api/conversation/"+z._id);case 4:t=e.sent,a(t.data),K(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[z._id,A]),Object(s.useEffect)((function(){var e,t=null===j||void 0===j||null===(e=j.members)||void 0===e?void 0:e.find((function(e){return e!==z._id}));(function(){var e=Object(l.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/users?userId=".concat(t));case 2:n=e.sent,B(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[p,c,null===j||void 0===j?void 0:j.members,z._id]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/api/message/"+(null===j||void 0===j?void 0:j._id));case 3:t=e.sent,x(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[j,A]);var X=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={sender:z._id,text:g,conversationId:j._id},s=j.members.find((function(e){return e!==z._id})),M.current.emit("sendMessage",{senderId:z._id,receiverId:s,text:g}),e.prev=4,e.next=7,d.a.post("/api/message",n);case 7:c=e.sent,x([].concat(Object(se.a)(p),[c.data])),N(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){var e;null===(e=W.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[p]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(k,{}),Object(S.jsxs)("div",{className:"messenger",children:[Object(S.jsx)("div",{className:"chatMenu",children:Object(S.jsxs)("div",{className:"chatMenuWrapper",children:[Object(S.jsx)("input",{placeholder:"Search for friends",className:"chatMenuInput"}),J?Object(S.jsx)("p",{children:"Loading..."}):c.map((function(e){return Object(S.jsx)("div",{onClick:function(){return b(e)},children:Object(S.jsx)(ae,{conversation:e,cb:A,setCb:G,currentUser:z})})}))]})}),Object(S.jsx)("div",{className:"chatBox",children:Object(S.jsxs)("div",{className:"chatBoxWrapper",children:[j&&Object(S.jsxs)("div",{className:"chatDetailsDisplay",children:[Object(S.jsx)("h3",{style:{fontStyle:"italic"},children:null===D||void 0===D?void 0:D.username}),Object(S.jsx)("img",{style:{width:"25px",height:"25px",borderRadius:"50%",marginLeft:"20px"},alt:"none",src:null===D||void 0===D||null===(e=D.profilePic)||void 0===e?void 0:e.url})]}),j?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"chatBoxTop",children:p.map((function(e){return Object(S.jsx)("div",{ref:W,children:Object(S.jsx)(re,{otherUser:D,message:e,own:e.sender===z._id})})}))}),Object(S.jsxs)("div",{className:"chatBoxBottom",children:[Object(S.jsx)("textarea",{className:"chatMessageInput",placeholder:"write something...",onChange:function(e){return N(e.target.value)},value:g}),Object(S.jsx)("button",{className:"chatSubmitButton",disabled:!g,onClick:X,children:"Send"})]})]}):Object(S.jsx)("span",{className:"noConversationText",children:"Open a conversation to start a chat."})]})}),Object(S.jsx)("div",{className:"chatOnline",children:Object(S.jsxs)("div",{className:"chatOnlineWrapper",children:[Object(S.jsx)("h2",{children:"Online friends"}),Object(S.jsx)(ie,{onlineUsers:P,currentId:z._id,setCurrentChat:b})]})})]})]})}n(160);var je=function(){var e,t,n=Object(s.useState)({}),c=Object(O.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)([]),j=Object(O.a)(i,2),u=j[0],b=j[1],h=Object(m.i)().username;return Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/posts/profile/".concat(h));case 2:t=e.sent,b(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[h]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/users?username=".concat(h));case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[h]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(k,{}),Object(S.jsxs)("div",{className:"profile",children:[Object(S.jsx)(B,{}),Object(S.jsxs)("div",{className:"profileChange",children:[Object(S.jsxs)("div",{className:"profileNew",children:[Object(S.jsxs)("div",{className:"profileImg",children:[Object(S.jsx)("img",{src:null===a||void 0===a||null===(e=a.profilePic)||void 0===e?void 0:e.url,alt:"profile here",className:"profileImgPic"}),Object(S.jsx)("img",{src:null===a||void 0===a||null===(t=a.coverPic)||void 0===t?void 0:t.url,alt:"cover here",className:"profileImgCover"})]}),Object(S.jsxs)("div",{className:"profileDescription",children:[Object(S.jsx)("h1",{children:a.username}),Object(S.jsx)("p",{children:a.description||"Please add a description"})]})]}),Object(S.jsxs)("div",{className:"profileBottom",children:[Object(S.jsx)(Q,{Posts:u,username:h}),Object(S.jsx)(Z,{user:a})]})]})]})]})},de=(n(161),{username:"",email:"",password:"",cf_password:"",error:""});var ue=function(e){var t=Object(s.useState)(de),n=Object(O.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)(!1),i=Object(O.a)(r,2),j=i[0],u=i[1],h=c.email,p=c.username,x=c.password,v=c.cf_password,f=c.error,g=Object(m.g)(),N=function(e){var t=e.target,n=t.value,s=t.name;a(Object(ee.a)(Object(ee.a)({},c),{},Object(R.a)({},s,n)))},w=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),x&&h&&p){e.next=4;break}return a(Object(ee.a)(Object(ee.a)({},c),{},{error:"Fields must not be empty."})),e.abrupt("return",setTimeout((function(){return a(Object(ee.a)(Object(ee.a)({},c),{},{error:""}))}),[3e3]));case 4:if(!(x.length<6)){e.next=7;break}return a(Object(ee.a)(Object(ee.a)({},c),{},{error:"Password must be atleast 6 characters."})),e.abrupt("return",setTimeout((function(){return a(Object(ee.a)(Object(ee.a)({},c),{},{error:""}))}),[3e3]));case 7:if(v===x){e.next=10;break}return a(Object(ee.a)(Object(ee.a)({},c),{},{error:"Passwords do not match."})),e.abrupt("return",setTimeout((function(){return a(Object(ee.a)(Object(ee.a)({},c),{},{error:""}))}),[3e3]));case 10:return e.prev=10,u(!0),e.next=14,d.a.post("/auth/register",{email:h,password:x,username:p});case 14:g.push("/login"),e.next=22;break;case 17:if(e.prev=17,e.t0=e.catch(10),!e.t0.response.data){e.next=22;break}return a(Object(ee.a)(Object(ee.a)({},c),{},{error:e.t0.response.data.msg})),e.abrupt("return",setTimeout((function(){u(!1),a(Object(ee.a)(Object(ee.a)({},c),{},{error:""}))}),[3e3]));case 22:u(!1);case 23:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"register",children:[Object(S.jsxs)("div",{className:"registerLeft",children:[Object(S.jsx)("h2",{children:"G-STAR"}),Object(S.jsx)("img",{src:"https://cdn.dribbble.com/users/24078/screenshots/15522433/media/e92e58ec9d338a234945ae3d3ffd5be3.jpg?compress=1&resize=400x300",alt:"",className:"registerImg"})]}),Object(S.jsx)("div",{className:"registerRight",children:Object(S.jsxs)("form",{className:"registerForm",onSubmit:w,children:[Object(S.jsx)("h4",{className:"registerHead",children:"Register Now"}),f&&Object(S.jsx)("span",{style:{color:"red",fontSize:"17px"},children:f}),Object(S.jsx)("input",{onChange:N,value:p,name:"username",type:"text",className:"registerInput",placeholder:"Username here"}),Object(S.jsx)("input",{onChange:N,value:h,name:"email",type:"email",className:"registerInput",placeholder:"Email here"}),Object(S.jsx)("input",{onChange:N,value:x,name:"password",type:"password",className:"registerInput",placeholder:"Password here"}),Object(S.jsx)("input",{onChange:N,value:v,name:"cf_password",type:"password",className:"registerInput",placeholder:"Confirm Password here"}),Object(S.jsx)("button",{className:"registerButton",type:"submit",children:j?Object(S.jsx)(z.a,{style:{color:"white"}}):"Register"}),Object(S.jsx)("p",{className:"registerAccountCheck",children:"Don't have an account yet?"}),Object(S.jsx)(b.b,{className:"registerLoginButton",to:"/login",type:"submit",children:"Login"})]})})]})},be=function(){return Object(S.jsxs)("div",{className:"landing",children:[Object(S.jsx)("div",{className:"landing-img-container",children:Object(S.jsx)("img",{src:"http://localhost:3000/images/landingPage.png",alt:"none"})}),Object(S.jsx)("div",{className:"landing-content",children:Object(S.jsxs)("div",{className:"landing-wrapper",children:[Object(S.jsx)("h1",{style:{background:"#eee",width:"fit-content",margin:"10px auto",color:"blue"},children:"G-STAR"}),Object(S.jsx)("h1",{children:"CONNECT WITH FRIENDS"}),Object(S.jsx)(b.b,{style:{background:"teal",padding:"12px",color:"white"},to:"/login",children:"Login Now"})]})})]})},me=n(201);n(162);var Oe=function(e){var t=e.noti;return Object(S.jsx)("div",{className:"notification-content",children:Object(S.jsx)("p",{children:t})})};var he=function(){var e,t,n,s=Object(m.g)(),c=Object(u.c)((function(e){return e.auth})),a=c.user,r=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.delete("/users/deleteNotification/".concat(a._id));case 2:t=e.sent,s.replace("notifications"),console.log(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{children:[Object(S.jsx)(k,{}),Object(S.jsxs)("div",{className:"notification",children:[Object(S.jsx)(B,{}),Object(S.jsxs)("div",{className:"notification-wrapper",children:[Object(S.jsx)("h1",{children:"Notifications"}),0===(null===c||void 0===c||null===(e=c.user)||void 0===e?void 0:e.notifications.length)?Object(S.jsx)("h1",{children:"You do not have any Notifications"}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{onClick:r,className:"deletePanel",children:[Object(S.jsx)("span",{children:"Clear All"}),Object(S.jsx)(me.a,{style:{color:"red",fontSize:"30px"}})]}),null===c||void 0===c||null===(t=c.user)||void 0===t||null===(n=t.notifications)||void 0===n?void 0:n.map((function(e){return Object(S.jsx)(Oe,{noti:e},e)}))]})]}),Object(S.jsx)(Z,{})]})]})};n(163);var pe=function(e){var t=e.user,n=e.currentUser,s=e.cb,c=e.setCb,a=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post("api/conversation",{senderId:null===n||void 0===n?void 0:n._id,recieverId:null===t||void 0===t?void 0:t._id});case 3:c(!s),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"allUsers-content",children:[Object(S.jsx)("div",{className:"image",children:Object(S.jsx)("img",{src:null===t||void 0===t?void 0:t.profilePic.url,alt:""})}),Object(S.jsxs)("div",{className:"details",children:[Object(S.jsx)("h4",{children:null===t||void 0===t?void 0:t.username}),Object(S.jsxs)("button",{onClick:a,children:["Add ",null===t||void 0===t?void 0:t.username]}),Object(S.jsx)("button",{children:Object(S.jsxs)(b.b,{style:{color:"white",textDecoration:"none"},to:"/profile/".concat(t.username),children:["View ",null===t||void 0===t?void 0:t.username]})})]})]},t._id)};var xe=function(){Object(m.g)();var e=Object(u.c)((function(e){return e.auth})).user,t=Object(s.useState)(),n=Object(O.a)(t,2),c=(n[0],n[1],Object(s.useState)([])),a=Object(O.a)(c,2),r=a[0],i=a[1],j=Object(s.useState)(!1),b=Object(O.a)(j,2),h=b[0],p=b[1];return Object(s.useEffect)((function(){try{(function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/users/allUsers");case 2:n=t.sent,i(n.data.filter((function(t){return t._id!==(null===e||void 0===e?void 0:e._id)})));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}catch(t){console.log(t)}}),[e._id]),Object(S.jsxs)("div",{children:[Object(S.jsx)(k,{cb:h}),Object(S.jsxs)("div",{className:"allUsers",children:[Object(S.jsx)(B,{}),Object(S.jsxs)("div",{className:"allUsers-wrapper",children:[Object(S.jsx)("h1",{children:"Getting started? Find friends"}),null===r||void 0===r?void 0:r.map((function(t){return Object(S.jsx)(pe,{setCb:p,cb:h,user:t,currentUser:e},t._id)}))]}),Object(S.jsx)(Z,{})]})]})},ve=function(){var e=Object(m.h)().pathname.split("/")[2];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(k,{}),Object(S.jsx)("div",{style:{padding:"20px 15rem",overflow:"hidden"},className:"home",children:Object(S.jsx)(Q,{style:{flex:"1"},SinglePostId:e})})]})};var fe=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.token})).token,n=Object(u.c)((function(e){return e.auth}));return Object(s.useEffect)((function(){if(localStorage.getItem("firstLogin"))try{(function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.post("/auth/refresh_token",null);case 2:n=t.sent,e({type:"GET_TOKEN",payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}catch(t){console.log(t.response.data.msg)}}),[e,n.isLogged]),Object(s.useEffect)((function(){t&&function(){var n=Object(l.a)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(N()),n.abrupt("return",I(t).then((function(t){e(y(t))})));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[t,e]),Object(S.jsx)("div",{className:"App",children:Object(S.jsxs)(b.a,{children:[Object(S.jsx)(m.a,{to:n.isLogged?"/home":"/"}),Object(S.jsxs)(m.d,{children:[Object(S.jsx)(m.b,{exact:!0,path:"/profile/:username",children:Object(S.jsx)(je,{})}),Object(S.jsx)(m.b,{exact:!0,path:"/",children:Object(S.jsx)(be,{})}),Object(S.jsx)(m.b,{exact:!0,path:"/messenger",children:Object(S.jsx)(le,{})}),Object(S.jsx)(m.b,{exact:!0,path:"/home",children:Object(S.jsx)($,{})}),Object(S.jsx)(m.b,{exact:!0,path:"/post/:id",children:Object(S.jsx)(ve,{})}),Object(S.jsx)(m.b,{exact:!0,path:"/register",children:Object(S.jsx)(ue,{})}),Object(S.jsx)(m.b,{exact:!0,path:"/login",children:Object(S.jsx)(ne,{})}),Object(S.jsx)(m.b,{exact:!0,path:"/notifications",children:Object(S.jsx)(he,{})}),Object(S.jsx)(m.b,{exact:!0,path:"/allUsers",children:Object(S.jsx)(xe,{})})]})]})})},ge=n(48),Ne={user:[],isLogged:!1,isAdmin:!1},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.LOGIN:return Object(ee.a)(Object(ee.a)({},e),{},{isLogged:!0});case g.GET_USER:return Object(ee.a)(Object(ee.a)({},e),{},{user:t.payload.user,isAdmin:t.payload.isAdmin});case g.LOGOUT:return Object(ee.a)(Object(ee.a)({},e),{},{user:[],isLogged:!1,isAdmin:!1});default:return e}},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.GET_TOKEN:return{token:t.payload};default:return e}},ye=n(88),Se=n.n(ye),ke=Object(ge.a)({auth:we,token:Ie,posts:Se.a}),_e=Object(ge.b)(ke,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var Ee=function(e){var t=e.children;return Object(S.jsx)(u.a,{store:_e,children:t})};r.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(Ee,{children:Object(S.jsx)(fe,{})})}),document.getElementById("root"))},68:function(e,t,n){},88:function(e,t){}},[[164,1,2]]]);
//# sourceMappingURL=main.397b896a.chunk.js.map